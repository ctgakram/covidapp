@using AppProj.Web.Helpers;
@using AppProj.Web;
@model AppProj.Web.Models.SearchModel
@{
    Layout = "~/Views/Shared/_LayoutMain.cshtml";
    var ajaxOpt = new AjaxOptions
    {
        HttpMethod = "POST",
        UpdateTargetId = "dialog1Body",
        InsertionMode = InsertionMode.Replace,
        OnSuccess = "openDialog1('জেলা ভিত্তিক তথ্য')",
        LoadingElementId = "loading",
        OnFailure = "failure"
    };
}

<div class="row-fluid">
    <div class="span12">
        <ul class="breadcrumb">
            <li>
                <h2 class="textPrimary"><img src="~/Content/img/icons2/burn_blu-ray2.png" class="utopia-icons2-small-img" style="padding-right:5px;"> বি.ডি.সি. - জেলার বর্তমান অবস্থা</h2>
            </li>
        </ul>

    </div>
</div>

<section id="formElement" class="utopia-widget utopia-form-box section">
    <div class="utopia-widget-title">
        <img src="~/Content/img/icons2/zoom_in.png" class="utopia-widget-icon">
        <span class="muted">search elements</span>

        <span class="textPrimary" id="iTotalRecords" style="float:right; padding-right:10px;">0</span>
        <span class="textPrimary" style="float:right;">Total Records: </span>
    </div>

    <div class="row-fluid">
        <div class="utopia-widget-content">
            <div class="span3 utopia-form-freeSpace">
                <fieldset>
                    <div class="control-group ">
                        <label class="control-label" for="ContentTypeId1"> বিভাগ:</label>
                        <div class="controls">
                            @Html.DropDownListFor(model => model.ContentTypeId1, Model.ContentTypes1, "All Divisions", new { @class = "span12 ddl" })

                        </div>
                    </div>
                </fieldset>

            </div>
            <div class="span3 utopia-form-freeSpace">
                <fieldset>
                    <div class="control-group ">
                        <label class="control-label" for="ContentTypeId2">জেলা :</label>
                        @Html.DropDownListFor(model => model.ContentTypeId2, Model.ContentTypes2, "All Districts", new { @class = "span12 ddl" })

                    </div>
                </fieldset>

            </div>
            <div class="span3 utopia-form-freeSpace">

                <fieldset>
                    <div class="control-group ">
                        <label class="control-label" for="select01">
                            &nbsp;
                        </label>
                        <div class="controls">
                            <a id="dateSearchButton" class="btn btn-info"><i class="icon icon-search icon-white"></i> সার্চ </a>
                        </div>
                    </div>

                </fieldset>

            </div>
            <div class="span3 utopia-form-freeSpace">
                <fieldset>
                    <div class="control-group">
                        <label class="control-label" for="select01">
                            &nbsp;
                        </label>
                        <div class="controls">
                            <a id="prn" href="#" class="btn pull-right"><i class="icon icon-print"></i> Print</a>
                            <a id="exp" href="#" class="btn pull-right"><i class="icon icon-download"></i> Export</a>

                        </div>
                    </div>
                </fieldset>
            </div>
        </div>
    </div>
</section>

<table id="gridTable" class="table table-striped table-bordered fixed_headers">
    <thead>
        <tr>
            <th colspan="2">এলাকা</th>
            <th colspan="7">Covid-19 তথ্য</th>
            <th colspan="3">অন্নান্য রোগীর তথ্য </th>
            <th colspan="3">ব্র্যাক কর্মীর তথ্য</th>
            <th colspan="2">মানবিক সহায়তা বরাদ্দ</th>
            <th colspan="4">মানবিক সহায়তা বিতরণ</th>
        </tr>
        <tr>
            <th>
                বিভাগ
            </th>
            <th>
                জেলা
            </th>
            <th>
                হাসপাতালের সংখ্যা
            </th>
            <th>
                আইসোলেশন বেড সংখ্যা
            </th>
            <th>
                এখন কোয়ারেন্টাইনে আছেন
            </th>
            <th>
                মোট কোয়ারেন্টাইন
            </th>
            <th>
                মোট রিলিজড
            </th>
            <th>
                মোট মৃত্যু
            </th>
            <th>
                মোট Covid-19 টেস্ট করা হয়েছে
            </th>
            <th>
                অন্যান্য রোগী
            </th>
            <th>
                শ্বাস-কষ্ট সংক্রান্ত রোগী
            </th>
            <th>
                প্রসূতি স্বাস্থ্য সেবা
            </th>
            <th>
                মোট আক্রান্তের সংখ্যা
            </th>
            <th>
                মোট সুস্থ হওয়ার সংখ্যা
            </th>
            <th>
                মোট কোয়ারেন্টাইনে গেছেন
            </th>
            <th> চাল (মেঃটন) </th>
            <th> টাকা </th>
            <th> চাল (মেঃটন) </th>
            <th> চাল বিতরণ পরিবার </th>
            <th> টাকা </th>
            <th> টাকা বিতরণ পরিবার </th>

        </tr>
    </thead>
</table>

@section scripts{
    <script type="text/javascript">
    $(document).ready(function () {

        $("#prn").click(function () {
            $("#gridTable").printThis();
        });

        $("#exp").click(function () {
            tableToExcel('gridTable', 'Export Name');
        });


            $(".ddl").change(function () {
                $('#gridTable').dataTable().fnDraw();
            });

        $("#dateSearchButton").click(function () {
            $('#gridTable').dataTable().fnDraw();
        });

            $('#ContentTypeId1').change(function (event) {
                LoadDistrictSearch($('#ContentTypeId1').val());
            });

            @*$('#ContentTypeId2').change(function (event) {
                LoadPointSearch($('#ContentTypeId2').val());
            });*@

        window.LoadDistrictSearch = function (areaId) {
                var url = '@Url.Content("~/Main/GetDistrictByDivision")?id=' + areaId;
                LoadDropDownListWithCall('ContentTypeId2'
                    , url
                    , 'All Districts'
                    , null);
            }

            @*window.LoadPointSearch = function (locationId) {
                var url = '@Url.Content("~/Point/GetPointsByLocation")?id=' + locationId;
                LoadDropDownListWithCall('ContentTypeId3'
                    , url
                    , null
                    , null);
            }*@

            var addPost = {
                'ContentTypeId1': 'ContentTypeId1',
                'ContentTypeId2': 'ContentTypeId2',
                'FromDate': 'FromDate',
                'ToDate': 'ToDate'
            }
            var btns = {
                //9: false //column number : is button group
            };

            /*data grid initializer*/
            DataTableBinder($("#gridTable")   //table object
                , '@Url.Content("~/DistrictSubmission/DataGridSum")'  //json data url
                , [64] //record size
                , false //show all with row size
            , addPost  //additional parameters at query string
            , btns   //buttons are at these columns
            , true
            );

        });
    </script>
}
